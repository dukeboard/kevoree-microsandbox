repo "https://repo1.maven.org/maven2"
repo "https://oss.sonatype.org/content/groups/public/"
repo 'http://maven.kevoree.org/daum/snapshots'

include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.javasenode:latest
include mvn:org.kevoree.library.java:org.kevoree.library.java.channels:release
include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.monitoring:latest
include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.samples:latest

// Node definition
add node0 : MonitoredNode
set node0.availability_memory='150000000'
set node0.availability_instr='200000000'
set node0.availability_received="15000"

//
add node0.MonitoringComponent0 : MonitoringComponent
set node0.Monitoring.Component0memory_threshold='65',
set node0.Monitoring.cpu_threshold='10'
set node0.Monitoring.net_in_threshold='10'
set node0.Monitoring.net_out_threshold='80'

add node0.rankingComponent:ModelBasedRankingHeuristicComponent

add channelMonitoring1 : AsyncBroadcast
add channelMonitoring2 : AsyncBroadcast

bind node0.MonitoringComponent0.getRankingOrder channelMonitoring1
bind node0.rankingComponent.getRankingOrder channelMonitoring1

bind node0.MonitoringComponent0.triggerMonitoringEvent channelMonitoring2
bind node0.rankingComponent.triggerMonitoringEvent channelMonitoring2

add node0.networkComponent : NetworkConsumerInputPeakSecond
set node0.networkComponent.url = "http://localhost:8080/"
set node0.networkComponent.sleepTime = "20"
set node0.networkComponent.network_input_peak_seconds = '10000'
set node0.networkComponent.violate="true"