repo "https://repo1.maven.org/maven2"
repo "https://oss.sonatype.org/content/groups/public/"
repo 'http://maven.kevoree.org/daum/snapshots'

include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.javasenode:latest
include mvn:org.kevoree.library.java:org.kevoree.library.java.channels:release
include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.monitoring:latest
include mvn:org.kevoree.microsandbox:org.kevoree.microsandbox.samples:latest

// Node definition
add node0 : MonitoredNode
set node0.availability_memory='150000000'
set node0.availability_instr='200000000'

//
add node0.MonitoringComponent0 : MonitoringComponent
set node0.MonitoringComponent0.memory_threshold='65'
set node0.MonitoringComponent0.cpu_threshold='10'
set node0.MonitoringComponent0.net_in_threshold='80'
set node0.MonitoringComponent0.net_out_threshold='80'
set node0.MonitoringComponent0.adaptiveMonitoring = 'true'
set node0.MonitoringComponent0.fineGrainedStrategy = 'single-monitoring'

add node0.rankingComponent :ModelBasedRankingHeuristicComponent

add channelMonitoring1 : AsyncBroadcast
add channelMonitoring2 : AsyncBroadcast

bind node0.MonitoringComponent0.getRankingOrder channelMonitoring1
bind node0.rankingComponent.getRankingOrder channelMonitoring1

bind node0.MonitoringComponent0.triggerMonitoringEvent channelMonitoring2
bind node0.rankingComponent.triggerMonitoringEvent channelMonitoring2

add node0.cpuComponent : CPUConsumerWallTime
set node0.cpuComponent.nbLoop = '2000000000'
set node0.cpuComponent.cpu_wall_time = '30000'